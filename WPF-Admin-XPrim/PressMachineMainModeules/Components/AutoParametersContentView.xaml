<UserControl
    x:Class="PressMachineMainModeules.Components.AutoParametersContentView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i18n="clr-namespace:WPF.Admin.Themes.I18n;assembly=WPF.Admin.Themes"
    xmlns:controls="https://handyorg.github.io/handycontrol"
    xmlns:setting="clr-namespace:WPF.Admin.Models.Models;assembly=WPF.Admin.Models"
    xmlns:converter="clr-namespace:PressMachineMainModeules.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:helper="clr-namespace:PressMachineMainModeules.Helper"
    xmlns:local="clr-namespace:PressMachineMainModeules.Components"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="clr-namespace:PressMachineMainModeules.Models"
    x:Name="preparams"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <UserControl.Resources>
        <converter:TypeVisibilityConverter x:Key="typeVisibility" />
        <converter:EnumToChineseConverter x:Key="enumtochinese" />
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"></BooleanToVisibilityConverter>
        <converter:AutoParameterViewConverter x:Key="AutoParameterViewConverter" />
        <converter:AutoParameterDefaultConverter x:Key="AutoParameterDefaultConverter" />
        <converter:AutoParameterVisibilityDefaultConverter x:Key="AutoParameterVisibilityDefaultConverter" />
        <Style x:Key="CorBorder" TargetType="Border">
            <Setter Property="CornerRadius" Value="8" />
        </Style>

    </UserControl.Resources>
    <ScrollViewer>
        <StackPanel>

            <StackPanel
                Visibility="{Binding ElementName=preparams, Path=ContentParameter.Type, Converter={StaticResource typeVisibility}}">

                <!--  曲线判断  -->
                <GroupBox
                    Margin="10"
                    Background="{DynamicResource Surface.Brush}"
                    FontWeight="Bold"
                    Header="{i18n:Localize ParametersContent.PlotJudge}"
                    Visibility="{Binding ElementName=preparams, Path=ContentParameter.Type, Converter={StaticResource typeVisibility}}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="auto" />
                        </Grid.RowDefinitions>
                        <DataGrid
                            x:Name="MonitorRec"
                            VerticalAlignment="Top"
                            AutoGenerateColumns="False"
                            Background="{DynamicResource Border.Brush}"
                            ItemsSource="{Binding ContentParameter.MonitorRecs, Mode=TwoWay, ElementName=preparams}">
                            <DataGrid.Columns>
                                <DataGridTextColumn
                                    Width="50"
                                    Binding="{Binding Id}"
                                    Header="ID"
                                    IsReadOnly="True" />
                                <DataGridTextColumn
                                    Width="100"
                                    Binding="{Binding Name}"
                                    Header="{i18n:Localize ParametersContent.JudgeTable.Name}" />
                                <!--  DisplayMemberPath指定在 UI 界面上显示哪个属性值  -->
                                <DataGridComboBoxColumn
                                    Width="240"
                                    DisplayMemberPath="Description"
                                    Header="{i18n:Localize ParametersContent.JudgeTable.Type}"
                                    ItemsSource="{Binding Source={helper:EnumBindingSource {x:Type model:MonitorType}}}"
                                    SelectedValueBinding="{Binding MonitorType}"
                                    SelectedValuePath="Value" />

                                <DataGridTextColumn
                                    Width="125"
                                    Binding="{Binding MinX}"
                                    Header="{i18n:Localize ParametersContent.JudgeTable.PositionLow}" />

                                <DataGridTextColumn
                                    Width="125"
                                    Binding="{Binding MaxX}"
                                    Header="{i18n:Localize ParametersContent.JudgeTable.PositionHigh}" />

                                <DataGridTextColumn
                                    Width="125"
                                    Binding="{Binding MinY}"
                                    Header="{i18n:Localize ParametersContent.JudgeTable.PressureLow}" />

                                <DataGridTextColumn
                                    Width="125"
                                    Binding="{Binding MaxY}"
                                    Header="{i18n:Localize ParametersContent.JudgeTable.PressureHigh}" />

                            </DataGrid.Columns>
                            <DataGrid.Resources>
                                <Style TargetType="ContentControl">
                                    <Setter Property="Width" Value="100" />
                                </Style>
                            </DataGrid.Resources>
                        </DataGrid>


                        <DockPanel Grid.Row="1" HorizontalAlignment="Center">
                            <Button
                                Margin="10"
                                controls:BorderElement.CornerRadius="15"
                                Click="AddWindow_Click"
                                FontSize="15"
                                i18n:I18nLocalizeAttach.AutoLocalize="ParametersContent.JudgeTable.AddWindow"
                                Style="{StaticResource ButtonPrimary}">
                            </Button>
                            <Button
                                Margin="10"
                                controls:BorderElement.CornerRadius="15"
                                Click="InsertWindow_Click"
                                FontSize="15"
                                i18n:I18nLocalizeAttach.AutoLocalize="ParametersContent.JudgeTable.InsertWindow"
                                Style="{StaticResource ButtonPrimary}">
                            </Button>
                            <Button
                                Margin="10"
                                controls:BorderElement.CornerRadius="15"
                                Click="DeleteWindow_Click"
                                FontSize="15"
                                i18n:I18nLocalizeAttach.AutoLocalize="ParametersContent.JudgeTable.DeleteWindow"
                                Style="{StaticResource ButtonPrimary}">
                            </Button>
                            <Button
                                Margin="10"
                                controls:BorderElement.CornerRadius="15"
                                Click="ClearWindow_Click"
                                FontSize="15"
                                i18n:I18nLocalizeAttach.AutoLocalize="ParametersContent.JudgeTable.ClearWindow"
                                Style="{StaticResource ButtonPrimary}">
                            </Button>
                        </DockPanel>
                    </Grid>
                </GroupBox>

                <!-- 包络线 -->
                <GroupBox
                    Margin="10"
                    Background="{DynamicResource Surface.Brush}"
                    FontWeight="Bold"
                    Visibility="{Binding Source={x:Static setting:AppSettings.Default},Path=OpenEnvelope,Converter={StaticResource BooleanToVisibilityConverter}}"
                    Header="{i18n:Localize ParametersContent.EnvelopeLine}">
                    <Grid>
                        <local:ManualEnvelopeLineView AutoMode="{Binding ElementName=preparams, Path=AutoMode}"
                                                      Envaelpen="{Binding ContentParameter.EnvelopePosintModel, ElementName=preparams}" />
                    </Grid>
                </GroupBox>

                <!--  可视区域  -->
                <GroupBox
                    Margin="10"
                    Background="{DynamicResource Surface.Brush}"
                    FontWeight="Bold"
                    Header="{i18n:Localize ParametersContent.VisibleArea}"
                    Visibility="{Binding ElementName=preparams, Path=ContentParameter.Type, Converter={StaticResource typeVisibility}}">
                    <StackPanel>
                        <UniformGrid Columns="2">
                            <Border
                                MinWidth="200"
                                MaxWidth="500"
                                Margin="20,10,10,10"
                                Background="{DynamicResource Border.Brush}"
                                Style="{StaticResource CorBorder}">
                                <StackPanel Margin="10">
                                    <TextBlock FontWeight="Bold" Text="{i18n:Localize ParametersContent.Limit.XLow}" />
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />

                                            <ColumnDefinition Width="60" />
                                        </Grid.ColumnDefinitions>
                                        <Border BorderBrush="{DynamicResource Border.Brush}" BorderThickness="0,0,0,0">
                                            <TextBox
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                FontWeight="Bold"
                                                Style="{StaticResource TextBoxExtend}"
                                                Text="{Binding ElementName=preparams, Path=ContentParameter.CurvePara.MinX}" />
                                        </Border>

                                    </Grid>
                                </StackPanel>
                            </Border>
                            <Border
                                MinWidth="200"
                                MaxWidth="500"
                                Margin="20,10,10,10"
                                Background="{DynamicResource Border.Brush}"
                                Style="{StaticResource CorBorder}">
                                <StackPanel Margin="10">
                                    <TextBlock FontWeight="Bold" Text="{i18n:Localize ParametersContent.Limit.XHigh}" />
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />

                                            <ColumnDefinition Width="60" />
                                        </Grid.ColumnDefinitions>
                                        <Border BorderBrush="{DynamicResource Border.Brush}" BorderThickness="0,0,0,0">
                                            <TextBox
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                FontWeight="Bold"
                                                Style="{StaticResource TextBoxExtend}"
                                                Text="{Binding ElementName=preparams, Path=ContentParameter.CurvePara.MaxX}" />
                                        </Border>

                                    </Grid>
                                </StackPanel>
                            </Border>
                            <Border
                                MinWidth="200"
                                MaxWidth="500"
                                Margin="20,10,10,10"
                                Background="{DynamicResource Border.Brush}"
                                Style="{StaticResource CorBorder}">
                                <StackPanel Margin="10">
                                    <TextBlock FontWeight="Bold" Text="{i18n:Localize ParametersContent.Limit.YLow}" />
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />

                                            <ColumnDefinition Width="60" />
                                        </Grid.ColumnDefinitions>
                                        <Border BorderBrush="{DynamicResource Border.Brush}" BorderThickness="0,0,0,0">
                                            <TextBox
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                FontWeight="Bold"
                                                Style="{StaticResource TextBoxExtend}"
                                                Text="{Binding ElementName=preparams, Path=ContentParameter.CurvePara.MinY}" />
                                        </Border>

                                    </Grid>
                                </StackPanel>
                            </Border>
                            <Border
                                MinWidth="200"
                                MaxWidth="500"
                                Margin="20,10,10,10"
                                Background="{DynamicResource Border.Brush}"
                                Style="{StaticResource CorBorder}">
                                <StackPanel Margin="10">
                                    <TextBlock FontWeight="Bold" Text="{i18n:Localize ParametersContent.Limit.YHigh}" />
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />

                                            <ColumnDefinition Width="60" />
                                        </Grid.ColumnDefinitions>
                                        <Border BorderBrush="{DynamicResource Border.Brush}" BorderThickness="0,0,0,0">
                                            <TextBox
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                FontWeight="Bold"
                                                Style="{StaticResource TextBoxExtend}"
                                                Text="{Binding ElementName=preparams, Path=ContentParameter.CurvePara.MaxY}" />
                                        </Border>

                                    </Grid>
                                </StackPanel>
                            </Border>
                        </UniformGrid>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
            <GroupBox
                Margin="10"
                Background="{DynamicResource Surface.Brush}"
                FontWeight="Bold"
                Header="{Binding ElementName=preparams, Path=Title}"
                Visibility="{Binding ElementName=preparams, Path=ContentParameter.Content, Converter={StaticResource AutoParameterVisibilityDefaultConverter}}">

                <StackPanel>
                    <ItemsControl
                        ItemsSource="{Binding ElementName=preparams, Path=ContentParameter.Content, Converter={StaticResource AutoParameterDefaultConverter}}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="2" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <ContentControl
                                    Content="{Binding Converter={StaticResource AutoParameterViewConverter}}" />
                                <!--  <Border  -->
                                <!--  MinWidth="200"  -->
                                <!--  MaxWidth="500"  -->
                                <!--  Margin="20,10,10,10"  -->
                                <!--  Background="{DynamicResource Border.Brush}"  -->
                                <!--  Style="{StaticResource CorBorder}">  -->
                                <!--     <StackPanel Margin="10"> -->
                                <!--         <TextBlock FontWeight="Bold" Text="{Binding Desc}" /> -->
                                <!--         <Grid Margin="0,5"> -->
                                <!--             <Grid.ColumnDefinitions> -->
                                <!--                 <ColumnDefinition Width="*" /> -->
                                <!--    -->
                                <!--                 <ColumnDefinition Width="60" /> -->
                                <!--             </Grid.ColumnDefinitions> -->
                                <!--  <Border BorderBrush="{DynamicResource Border.Brush}"  -->
                                <!--  BorderThickness="0,0,0,0">  -->
                                <!--  <TextBox  -->
                                <!--  HorizontalAlignment="Stretch"  -->
                                <!--  VerticalAlignment="Center"  -->
                                <!--  Background="Transparent"  -->
                                <!--  BorderThickness="0"  -->
                                <!--  FontWeight="Bold"  -->
                                <!--  Style="{StaticResource TextBoxExtend}"  -->
                                <!--  Text="{Binding Value, UpdateSourceTrigger=LostFocus}" />  -->
                                <!--             </Border> -->
                                <!--  <TextBlock  -->
                                <!--  Grid.Column="1"  -->
                                <!--  Margin="5,0"  -->
                                <!--  VerticalAlignment="Bottom"  -->
                                <!--  FontWeight="Bold"  -->
                                <!--  Text="{Binding Unit}" />  -->
                                <!--         </Grid> -->
                                <!--     </StackPanel> -->
                                <!-- </Border> -->
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>

            </GroupBox>


        </StackPanel>
    </ScrollViewer>
</UserControl>