<UserControl
    x:Class="PressMachineMainModeules.Components.ManualEnvelopeLineView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i18n="clr-namespace:WPF.Admin.Themes.I18n;assembly=WPF.Admin.Themes"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:PressMachineMainModeules.Components"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Name="envelopel"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="120" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Column="0" Margin="5">
            <CheckBox
                Width="100"
                Margin="0,5"
                Content="{i18n:Localize EnvelopeLine.OpenLine}"
                IsChecked="{Binding ElementName=envelopel, Path=Envaelpen.IsSelected}" />
            <CheckBox
                Width="100"
                Margin="0,5"
                Content="{i18n:Localize EnvelopeLine.OpenTop}"
                IsChecked="{Binding ElementName=envelopel, Path=Envaelpen.Top}"
                IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.IsSelected}" />
            <CheckBox
                Width="100"
                Margin="0,5"
                Content="{i18n:Localize EnvelopeLine.OpenBottom}"
                IsChecked="{Binding ElementName=envelopel, Path=Envaelpen.Bottom}"
                IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.IsSelected}" />
            <Button
                Width="100"
                Margin="0,5"
                Click="AddValue"
                Content="{i18n:Localize EnvelopeLine.AddValue}"
                IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.IsSelected}"
                Style="{StaticResource ButtonPrimary}">
            </Button>
            <Button
                Width="100"
                Margin="0,5"
                Click="OpenFile"
                Content="{i18n:Localize EnvelopeLine.FileImport}"
                IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.IsSelected}"
                Style="{StaticResource ButtonPrimary}">
            </Button>
            <Button
                Width="100"
                Margin="0,5"
                Click="ShowEnvelope"
                Content="{i18n:Localize EnvelopeLine.OpenPreview}"
                IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.IsSelected}"
                Style="{StaticResource ButtonPrimary}">
            </Button>
            <Button
                Width="100"
                Margin="0,5"
                Click="HideEnvelope"
                Content="{i18n:Localize EnvelopeLine.ClosePreview}"
                IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.IsSelected}"
                Style="{StaticResource ButtonPrimary}">
            </Button>
            <Button
                Width="100"
                Margin="0,5"
                Click="Clear"
                Content="{i18n:Localize EnvelopeLine.ClearData}"
                IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.IsSelected}"
                Style="{StaticResource ButtonPrimary}">
            </Button>
        </StackPanel>

        <Border Width="2" HorizontalAlignment="Right" />
        <Grid Grid.Column="1">
            <ScrollViewer HorizontalScrollBarVisibility="Auto">
                <ItemsControl VirtualizingStackPanel.IsVirtualizing="True"
                              VirtualizingStackPanel.VirtualizationMode="Recycling"
                              ItemsSource="{Binding ElementName=envelopel, Path=Envaelpen.Posints}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <!-- 添加ItemContainerStyle以优化容器重用 -->
                    <ItemsControl.ItemContainerStyle>
                        <Style TargetType="ContentPresenter">
                            <Setter Property="Width" Value="250" /> <!-- 固定每个项的宽度，帮助虚拟化StackPanel计算布局 -->
                        </Style>
                    </ItemsControl.ItemContainerStyle>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="5">
                                <Grid>
                                    <StackPanel Margin="20,30,30,10" VerticalAlignment="Center">
                                        <StackPanel
                                            Margin="5"
                                            IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.Top}"
                                            Orientation="Horizontal">
                                            <TextBlock
                                                Margin="5"
                                                i18n:I18nLocalizeAttach.AutoLocalize="EnvelopeLine.Limit.X"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center">
                                            </TextBlock>
                                            <TextBox Width="100" Text="{Binding X1}" />
                                        </StackPanel>
                                        <StackPanel
                                            Margin="5"
                                            IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.Top}"
                                            Orientation="Horizontal">
                                            <TextBlock
                                                Margin="5"
                                                HorizontalAlignment="Center"
                                                i18n:I18nLocalizeAttach.AutoLocalize="EnvelopeLine.Limit.Y1"
                                                VerticalAlignment="Center">
                                            </TextBlock>
                                            <TextBox Width="100" Text="{Binding Y1}" />
                                        </StackPanel>

                                        <StackPanel
                                            Margin="5"
                                            IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.Bottom}"
                                            Orientation="Horizontal">
                                            <TextBlock
                                                Margin="5"
                                                HorizontalAlignment="Center"
                                                i18n:I18nLocalizeAttach.AutoLocalize="EnvelopeLine.Limit.Y2"
                                                VerticalAlignment="Center">
                                            </TextBlock>
                                            <TextBox Width="100" Text="{Binding Y2}" />
                                        </StackPanel>
                                    </StackPanel>
                                    <Button
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Click="OrderByValue"
                                        Style="{StaticResource IconButton}"
                                        Tag="{Binding}">
                                        <Path
                                            Width="10"
                                            Height="10"
                                            Data="{StaticResource Admin}"
                                            Fill="{DynamicResource Text.Primary.Brush}"
                                            Stretch="Fill" />
                                    </Button>
                                    <Button
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Top"
                                        Click="DelValue"
                                        Style="{StaticResource IconButton}"
                                        Tag="{Binding}">
                                        <Path
                                            Width="10"
                                            Height="10"
                                            Data="{StaticResource CloseIco}"
                                            Fill="{DynamicResource Text.Primary.Brush}"
                                            Stretch="Fill" />
                                    </Button>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
            <!-- <ScrollViewer HorizontalScrollBarVisibility="Auto"> -->
            <!--     ~1~ 使用ListView替代ItemsControl以获得更好的虚拟化支持 @1@ -->
            <!--     <ListView -->
            <!--         ItemsSource="{Binding ElementName=envelopel, Path=Envaelpen.Posints}" -->
            <!--         VirtualizingStackPanel.IsVirtualizing="True" -->
            <!--         VirtualizingStackPanel.VirtualizationMode="Recycling" -->
            <!--         ScrollViewer.CanContentScroll="True"> -->
            <!-- -->
            <!--         ~1~ 水平方向的虚拟化面板 @1@ -->
            <!--         <ListView.ItemsPanel> -->
            <!--             <ItemsPanelTemplate> -->
            <!--                 <VirtualizingStackPanel Orientation="Horizontal" /> -->
            <!--             </ItemsPanelTemplate> -->
            <!--         </ListView.ItemsPanel> -->
            <!-- -->
            <!--         ~1~ 禁用默认的选中样式 @1@ -->
            <!--         <ListView.ItemContainerStyle> -->
            <!--             <Style TargetType="ListViewItem"> -->
            <!--                 <Setter Property="Focusable" Value="False" /> -->
            <!--                 <Setter Property="Template"> -->
            <!--                     <Setter.Value> -->
            <!--                         <ControlTemplate TargetType="ListViewItem"> -->
            <!--                             <ContentPresenter /> -->
            <!--                         </ControlTemplate> -->
            <!--                     </Setter.Value> -->
            <!--                 </Setter> -->
            <!--             </Style> -->
            <!--         </ListView.ItemContainerStyle> -->
            <!-- -->
            <!--         <ListView.ItemTemplate> -->
            <!--             <DataTemplate> -->
            <!--                 <Border Margin="5"> -->
            <!--                     <Grid> -->
            <!--                         <StackPanel Margin="20,30,30,10" VerticalAlignment="Center"> -->
            <!--                             <StackPanel -->
            <!--                                 Margin="5" -->
            <!--                                 IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.Top}" -->
            <!--                                 Orientation="Horizontal"> -->
            <!--                                 <TextBlock -->
            <!--                                     Margin="5" -->
            <!--                                     HorizontalAlignment="Center" -->
            <!--                                     VerticalAlignment="Center"> -->
            <!--                                     限位X轴点： -->
            <!--                                 </TextBlock> -->
            <!--                                 <TextBox Width="100" Text="{Binding X1}" /> -->
            <!--                             </StackPanel> -->
            <!--                             <StackPanel -->
            <!--                                 Margin="5" -->
            <!--                                 IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.Top}" -->
            <!--                                 Orientation="Horizontal"> -->
            <!--                                 <TextBlock -->
            <!--                                     Margin="5" -->
            <!--                                     HorizontalAlignment="Center" -->
            <!--                                     VerticalAlignment="Center"> -->
            <!--                                     上限Y轴点： -->
            <!--                                 </TextBlock> -->
            <!--                                 <TextBox Width="100" Text="{Binding Y1}" /> -->
            <!--                             </StackPanel> -->
            <!-- -->
            <!--                             <StackPanel -->
            <!--                                 Margin="5" -->
            <!--                                 IsEnabled="{Binding ElementName=envelopel, Path=Envaelpen.Bottom}" -->
            <!--                                 Orientation="Horizontal"> -->
            <!--                                 <TextBlock -->
            <!--                                     Margin="5" -->
            <!--                                     HorizontalAlignment="Center" -->
            <!--                                     VerticalAlignment="Center"> -->
            <!--                                     下限Y轴点： -->
            <!--                                 </TextBlock> -->
            <!--                                 <TextBox Width="100" Text="{Binding Y2}" /> -->
            <!--                             </StackPanel> -->
            <!--                         </StackPanel> -->
            <!--                         <Button -->
            <!--                             HorizontalAlignment="Right" -->
            <!--                             VerticalAlignment="Bottom" -->
            <!--                             Click="OrderByValue" -->
            <!--                             Style="{StaticResource IconButton}" -->
            <!--                             Tag="{Binding}"> -->
            <!--                             <Path -->
            <!--                                 Width="10" -->
            <!--                                 Height="10" -->
            <!--                                 Data="{StaticResource Admin}" -->
            <!--                                 Fill="{DynamicResource Text.Primary.Brush}" -->
            <!--                                 Stretch="Fill" /> -->
            <!--                         </Button> -->
            <!--                         <Button -->
            <!--                             HorizontalAlignment="Right" -->
            <!--                             VerticalAlignment="Top" -->
            <!--                             Click="DelValue" -->
            <!--                             Style="{StaticResource IconButton}" -->
            <!--                             Tag="{Binding}"> -->
            <!--                             <Path -->
            <!--                                 Width="10" -->
            <!--                                 Height="10" -->
            <!--                                 Data="{StaticResource CloseIco}" -->
            <!--                                 Fill="{DynamicResource Text.Primary.Brush}" -->
            <!--                                 Stretch="Fill" /> -->
            <!--                         </Button> -->
            <!--                     </Grid> -->
            <!--                 </Border> -->
            <!--             </DataTemplate> -->
            <!--         </ListView.ItemTemplate> -->
            <!--     </ListView> -->
            <!-- </ScrollViewer> -->

        </Grid>
    </Grid>
</UserControl>