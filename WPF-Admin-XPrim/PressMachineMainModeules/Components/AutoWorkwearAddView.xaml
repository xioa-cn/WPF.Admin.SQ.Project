<UserControl
    x:Class="PressMachineMainModeules.Components.AutoWorkwearAddView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i18n="clr-namespace:WPF.Admin.Themes.I18n;assembly=WPF.Admin.Themes"
    xmlns:local="clr-namespace:PressMachineMainModeules.Components"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:PressMachineMainModeules.ViewModels"
    d:DataContext="{d:DesignInstance Type=vm:AutoWorkwearCheckCodeViewModel}"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <StackPanel
            Grid.Row="0"
            Margin="10"
            HorizontalAlignment="Left">
            <Button
                Width="100"
                i18n:I18nLocalizeAttach.AutoLocalize="btn.Add"
                BorderBrush="{DynamicResource Primary.Brush}"
                Command="{Binding AddWorkwearCodeCommand}">
            </Button>
        </StackPanel>
        <Grid Grid.Row="1">
            <DataGrid
                Width="auto"
                Margin="10"
                AlternatingRowBackground="{DynamicResource Surface.Brush}"
                AutoGenerateColumns="False"
                Background="{DynamicResource Background.Brush}"
                BorderBrush="{DynamicResource Border.Brush}"
                BorderThickness="1"
                FontSize="20"
                GridLinesVisibility="All"
                HeadersVisibility="Column"
                HorizontalGridLinesBrush="{DynamicResource Border.Brush}"
                IsReadOnly="True"
                ItemsSource="{Binding AutoWorkwearCodeList}"
                LoadingRow="DataGrid_LoadingRow"
                RowBackground="{DynamicResource Background.Brush}"
                RowHeaderWidth="40"
                VerticalGridLinesBrush="{DynamicResource Border.Brush}">

                <DataGrid.Columns>

                    <DataGridTextColumn
                        Width="auto"
                        Binding="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=Header}"
                        Header="{i18n:Localize Table.Serial}"
                        IsReadOnly="True" />

                    <DataGridTextColumn
                        Width="*"
                        Binding="{Binding}"
                        Header="{i18n:Localize Workwear.WorkwearCode}">
                        <DataGridTextColumn.CellStyle>
                            <Style BasedOn="{StaticResource cell}" TargetType="DataGridCell">
                                <Setter Property="ToolTip">
                                    <Setter.Value>
                                        <ToolTip>
                                            <StackPanel>
                                                <TextBlock FontWeight="Bold" 
                                                           i18n:I18nLocalizeAttach.AutoLocalize="Table.ColumnName"/>
                                                <TextBlock  
                                                           i18n:I18nLocalizeAttach.AutoLocalize="Workwear.WorkwearCode"/>
                                                <TextBlock FontWeight="Bold" 
                                                           i18n:I18nLocalizeAttach.AutoLocalize="Table.ColumnValue"/>
                                                <TextBlock Text="{Binding}" />
                                            </StackPanel>
                                        </ToolTip>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGridTextColumn.CellStyle>
                    </DataGridTextColumn>

                    <!--  操作列  -->
                    <DataGridTemplateColumn Width="*" Header="{i18n:Localize Table.Operation}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Button
                                        Width="80"
                                        Height="30"
                                        Margin="5,0"
                                        Background="{DynamicResource Primary.Brush}"
                                        Command="{Binding DataContext.RomoveWorkwearCodeCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                        CommandParameter="{Binding}"
                                        i18n:I18nLocalizeAttach.AutoLocalize="btn.Delete"
                                        Foreground="{DynamicResource Text.Primary.Brush}"
                                        Style="{StaticResource ButtonDanger}" />

                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Grid>
</UserControl>